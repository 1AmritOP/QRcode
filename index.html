<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <link rel="stylesheet" href="app.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>
    <header>
        <h1>Amrit Kumar</h1>
    </header>

    <form>
        <label for="text">Enter Your Text/Links</label>
        <input type="text" name="text" id="text">
        <button id="generateBtn" type="submit">Generate</button>
    </form>

    <main>
        <div id="qrcode"></div>
        <button type="button" id="downloadBtn" >Download QR Code</button>
    </main>

    <script>
        let form = document.querySelector("form");
        let downloadBtn = document.querySelector("#downloadBtn");

        form.onsubmit = (e) => {
            e.preventDefault();
            let qrBox = document.querySelector("#qrcode");
            qrBox.innerHTML = "";
            let textValue = document.querySelector("#text").value.trim();

            if (!textValue) {
                alert("Please enter some text or a link.");
                return;
            }

            new QRCode(qrBox, {
                text: textValue,
                width: 200,
                height: 200
            });

            // Show download button
            downloadBtn.style.display = "inline-block";
        };

        downloadBtn.onclick = () => {
            let qrImage = document.querySelector("#qrcode img") || document.querySelector("#qrcode canvas");
            if (!qrImage) return;

            let imgSrc;

            // If it's an <img>
            if (qrImage.tagName.toLowerCase() === "img") {
                imgSrc = qrImage.src;
            }
            // If it's a <canvas>
            else {
                imgSrc = qrImage.toDataURL("image/png");
            }

            let link = document.createElement("a");
            link.href = imgSrc;
            link.download = "qrcode.png";
            link.click();
        };
    </script>
</body>

</html>
